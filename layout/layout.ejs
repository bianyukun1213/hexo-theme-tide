<!DOCTYPE html>
<% const tideConfig=parse_config(site, config, theme, page) %>
    <html lang="<%= tideConfig.language %>" dir="<%= tideConfig.direction %>">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            <% if(tideConfig.page_title==='' ) { %>
                <%= tideConfig.site_title %>
                    <% } else { %>
                        <%= tideConfig.page_title %>
                            <% } %>
        </title>

        <!-- favivon、description、keywords…… -->
        <link rel="icon" href="<%= tideConfig.meta_icons?.favicon %>">
        <link rel="apple-touch-icon" href="<%= tideConfig.meta_icons?.apple_touch_icon %>">
        <meta name="description" content="<%= tideConfig.description %>">
        <!-- robots index follow……，如果检测到页面隐藏，就不加这个，而是让插件决定 -->
        <!-- 这样写有格式化 -->
        <!-- 我得把 open graph 的选项写在 ogOptions 里，如果直接写在函数参数处，unocss 会生成错误的样式 -->
        <%- '<meta name="keywords" content="' %>
            <% for(let i=0; i < tideConfig.keywords.length ; ++i) { %>
                <% if(i!==tideConfig.keywords.length-1) {%>
                    <%= tideConfig.keywords[i]+' ,' %>
            <% } else {%>
                <%= tideConfig.keywords[i] %>
                    <% } %>
                        <% } %>
                            <%- '">' %>
                                <%- meta_generator() %>
                                    <%- meta_generator_tide() %>
                                        <% const ogOptions={title: tideConfig.page_title==='' ?
                                            tideConfig.site_title:tideConfig.page_title,author:tideConfig.author,language:tideConfig.language,description:tideConfig.description}
                                            %>
                                            <%- open_graph(ogOptions) %>
                                                <link rel="stylesheet"
                                                    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
                                                    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
                                                    crossorigin="anonymous" referrerpolicy="no-referrer" />
                                                <%- css('/css/tide.css') %>
                                                    <%- js('/js/third-party/jquery.min.js') %>
    </head>

    <body>
        <textarea un-fixed un-w="96" un-h="96" un-right="0" un-bottom="0" un-z="100">
        <%- JSON.stringify(tideConfig,null,2) %>
    </textarea>
        <div id="tide-root" <% if(is_post()) { %>
            tide-is-post="true"
            <% } %>
                un-bg="b-scnd" un-absolute un-top="0" un-bottom="0" un-left="0" un-right="0" un-text="base">
                <div id="tide-side-bar" un-sc-trans-default un-bg="prim" un-fixed un-ltr="-left-75vw"
                    un-rtl="-right-75vw" un-flex="~ col" un-justify="between" un-z="30" un-text="center t-lb"
                    un-w="75vw" un-h="full">
                    <header un-flex="none" un-p="8">
                        <% if(is_home()) { %>
                            <h1 id="tide-site-name" un-my="4" un-text="4xl" un-font="bold">
                                <%= tideConfig.site_title %>
                            </h1>
                            <% } else { %>
                                <p id="tide-site-name" un-my="4" un-text="4xl" un-font="bold">
                                    <%= tideConfig.site_title %>
                                </p>
                                <% } %>
                                    <!-- <img id="author-avatar" src="https://bucket.hollisdevhub.com/blog/common/avatar.webp"
                                    alt="" un-w="1/3" un-aspect="auto">
                                    <p id="author" un-my="2" un-text="2xl" un-font="bold">Hollis</p> -->
                    </header>
                    <% if(tideConfig.microformats2){ %>
                        <div id="tide-site-h-card" class="h-card" un-hidden>
                            <span class="p-honorific-prefix">
                                <%= tideConfig.site_h_card.p_honorific_prefix %>
                            </span>
                            <span class="p-name">
                                <%= tideConfig.site_h_card.p_name %>
                            </span>
                            <span class="p-given-name">
                                <%= tideConfig.site_h_card.p_given_name %>
                            </span>
                            <span class="p-additional-name">
                                <%= tideConfig.site_h_card.p_additional_name %>
                            </span>
                            <span class="p-family-name">
                                <%= tideConfig.site_h_card.p_family_name %>
                            </span>
                            <span class="p-honorific-suffix">
                                <%= tideConfig.site_h_card.p_honorific_suffix %>
                            </span>
                            <span class="p-nickname">
                                <%= tideConfig.site_h_card.p_nickname %>
                            </span>
                            <img class="u-photo" src="<%= tideConfig.site_h_card.u_photo %>"
                                alt="<%= tideConfig.site_h_card.p_name %>">
                            <% for(const item of tideConfig.site_h_card.u_uid) { %>
                                <a class="u-url u-uid" href="<%= item.link %>" target="_blank" rel="me noopener">
                                    <%= item.text %>
                                </a>
                                <% } %>
                                    <a class="u-email" href="mailto:<%= tideConfig.site_h_card.u_email %>"
                                        target="_blank" rel="me noopener">
                                        <%= tideConfig.site_h_card.u_email %>
                                    </a>
                                    <div class="p-note">
                                        <%= tideConfig.site_h_card.p_note %>
                                    </div>
                        </div>
                        <% } %>
                            <nav id="tide-navigation" un-flex="initial" un-self="center" un-w="full">
                                <ul un-inline-flex un-flex="col" un-items="start" un-p="0" un-m="0" un-w="auto"
                                    un-list="none" un-text="2xl">
                                    <% for(const key in tideConfig.navigation) { %>
                                        <% if (Object.prototype.hasOwnProperty.call(tideConfig.navigation, key)) { %>
                                            <% const element=tideConfig.navigation[key]; %>
                                                <li un-inline-block un-mb="8"><i class="<%= element.icon %>"
                                                        un-ltr="mr-4" un-rtl="ml-4" aria-hidden="true"></i><a
                                                        un-sc-link-plain un-text="!t-lb" href="<%= element.link %>">
                                                        <%= key %>
                                                    </a>
                                                </li>
                                                <% } %>
                                                    <%} %>
                                </ul>
                            </nav>
                            <footer un-flex="none" un-p="8">
                                <!-- 留一个隐藏的 div，方便用户通过修改注入 -->
                                <div class="tide-footer-injection-point" un-hidden></div>
                                <% if(!tide_utils().isEmptyObject(tideConfig.icp_record)) { %>
                                    <p id="tide-icp-record"><a un-sc-link-plain un-text="!t-lb"
                                            href="<%= tideConfig.icp_record.link %>" target="_blank" rel="noopener">
                                            <%= tideConfig.icp_record.text %>
                                        </a></p>
                                    <% } %>
                                        <p id="tide-powered-by">
                                            <%- __('navigation.footer.poweredBy') %>
                                        </p>
                            </footer>
                </div>
                <%- /* partial('./partials/tide-deco.svg') 斜角，废弃 */ %>
                    <!-- <div id="tide-deco"><img src="./img/tide-deco.svg" alt=""></div> -->
                    <div id="tide-content" un-sc-trans-default un-fixed un-flex="~ col" un-w="full" un-h="full">
                        <!-- 顶部工具栏 -->
                        <header id="tide-top-bar" un-bg="b-prim" un-flex un-justify="stretch" un-items="center"
                            un-min-w="64" un-h="16">
                            <div un-w="1/4" un-h="12">
                                <button id="tide-btn-nav" aria-label="<%= __('navigation.btnNav.ariaLable') %>"
                                    un-sc-btn-default un-relative un-ltr="float-left ml-4" un-rtl="float-right mr-4"
                                    un-w="12" un-h="12">
                                    <i id="tide-btn-nav-icon-bars" class="fa-solid fa-bars" aria-hidden="true"></i>
                                    <i id="tide-btn-nav-icon-close" class="fa-solid fa-close" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div un-w="3/4" un-h="12">
                                <!-- 开启 relative，使用 right 让元素具有符合直觉的 tab index -->
                                <button id="tide-btn-scroll-top"
                                    aria-label="<%= __('navigation.btnScrollTop.ariaLable') %>" un-sc-btn-default
                                    un-relative un-ltr="float-right right-32 mr-4" un-rtl="float-left left-32 ml-4"
                                    un-w="12" un-h="12">
                                    <i class="fa-solid fa-arrow-up" aria-hidden="true"></i>
                                </button>
                                <button id="tide-btn-search" aria-label="<%= __('navigation.btnSearch.ariaLable') %>"
                                    un-sc-btn-default un-relative un-ltr="float-right mr-4" un-rtl="float-left ml-4"
                                    un-w="12" un-h="12">
                                    <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
                                </button>
                                <button id="tide-btn-settings"
                                    aria-label="<%= __('navigation.btnSettings.ariaLable') %>" un-sc-btn-default
                                    un-relative un-ltr="float-right -right-32 mr-4" un-rtl="float-left -left-32 ml-4"
                                    un-w="12" un-h="12">
                                    <i class="fa-solid fa-gear" aria-hidden="true"></i>
                                </button>
                            </div>
                        </header>
                        <main id="tide-main-content" un-bg="b-prim" un-flex="1" un-px="16" un-overflow="auto">
                            <%- body %>
                                <!-- 页面 -->
                                <!-- <article></article> -->
                                <!-- 评论 -->
                                <!-- <article></article> -->
                                <!-- TOC，从 lg 开始显示 -->
                                <!-- <aside></aside> -->
                        </main>
                        <!-- <aside id="tide-side-tools" un-bg="red" un-fixed un-right="4" un-bottom="4" un-w="32" un-h="64" un-flex="~ col">
                    </aside> -->
                    </div>
        </div>
        <%- js('/js/tide.js') %>
    </body>

    </html>