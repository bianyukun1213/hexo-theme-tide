@import url('./third-party/modern-normalize.min.css');

/* preflights */

html {
    --tide-color-primary: #3F72AF;
    --tide-color-secondary: #00ADB5;
    --tide-color-background-primary: #FFFFFF;
    --tide-color-background-secondary: #FAFAFA;
    --tide-color-text-primary: #323739;
    --tide-color-text-secondary: #5c6669;
    --tide-color-text-diminished: #EAECED;
    --tide-color-text-side-bar: #FFFFFF;
    --tide-color-focused-outline: #E36209;
    --tide-color-link: #3F72AF;
    --tide-color-link-hover: #3F72AF;
    --tide-color-link-visited: #00ADB5;
    --tide-color-code: #3F72AF;
    --tide-color-table-border: #E5E7EB;
    --tide-color-table-background-head: #F3F3F3;
    --tide-color-table-background-even: #FAFAFA;
}

* {
    scrollbar-width: thin;
}

*:focus-visible {
    @apply outline-4 outline-fcs-ol;
}

a {
    @apply sc-link-default;
}

button {
    -webkit-tap-highlight-color: transparent;
}

@unocss;

/* 自定义样式 */

html.tide-large-font {
    font-size: 32px;
    /* 直接调整基础字体，不要用 unocss 的 text-lg 等，目的只是调节 rem 值 */
}

/* 斜角，暂时舍弃，因为如果使用过渡效果会穿帮，而且 rtl 下有白色接缝 */
/* #tide-deco {
    @apply sc-trans-default left-0;
} */

/* [dir="rtl"] #tide-deco {
    transform: rotateY(180deg)
} */

/* 暂时去掉 shadow，因为 tide-content 也移动了，tide-side-bar 就不像是浮在上面的一层 */
/* [tide-side-bar-expanded="true"] #tide-side-bar { */
    /* box-shadow: 0 0 8px 4px rgba(0, 0, 0, 0.5); */
    /* unocss 精细控制不好使，这里写原生 */
/* } */

[tide-side-bar-expanded="true"] #tide-btn-nav-icon-bars {
    @apply hidden;
}

[tide-side-bar-expanded="true"] #tide-btn-nav-icon-close {
    @apply inline;
}

[tide-side-bar-expanded="false"] #tide-btn-nav-icon-bars {
    @apply inline;
}

[tide-side-bar-expanded="false"] #tide-btn-nav-icon-close {
    @apply hidden;
}

/* 默认小屏幕 */
/* 侧栏默认整体滚动 */
#tide-side-bar {
    @apply overflow-auto;
}

/* 使用 [dir="ltr"] 而非 @apply ltr:…… ，因为后者在转换后会有空的样式，显示警告 */
[dir="ltr"] [tide-side-bar-expanded="true"] #tide-side-bar,
[dir="ltr"] [tide-side-bar-expanded="true"] #tide-content {
    @apply translate-x-75vw;
    /* @apply shadow-[-30px_0_30px_30px_rgba(0, 0, 0, 0.3)]; */
}

[dir="rtl"] [tide-side-bar-expanded="true"] #tide-side-bar,
[dir="rtl"] [tide-side-bar-expanded="true"] #tide-content {
    @apply -translate-x-75vw;
}

/* md 往后调整侧边栏宽度为 96 */
@media (min-width: 768px) {

    #tide-side-bar {
        @apply w-96;
    }

    [dir="ltr"] #tide-side-bar {
        @apply -left-96;
    }

    [dir="rtl"] #tide-side-bar {
        @apply -right-96 w-96;
    }

    [dir="ltr"] [tide-side-bar-expanded="true"] #tide-side-bar,
    [dir="ltr"] [tide-side-bar-expanded="true"] #tide-content {
        @apply translate-x-96;
    }

    [dir="rtl"] [tide-side-bar-expanded="true"] #tide-side-bar,
    [dir="rtl"] [tide-side-bar-expanded="true"] #tide-content {
        @apply -translate-x-96;
    }
}

/* xl 往后非文章页横向不再允许折叠 */
@media (orientation: landscape) {

    @media (min-width: 1280px) {
        /* 1280*768 后侧栏整体不再允许滚动，导航部分允许滚动 */
        @media (min-height: 768px) {
            #tide-side-bar {
                @apply overflow-clip;
            }

            #tide-navigation {
                @apply overflow-auto;
            }
        }

        [dir="ltr"] :not([tide-is-post]) #tide-side-bar,
        [dir="ltr"] :not([tide-is-post]) #tide-content {
            @apply translate-x-96;
        }

        [dir="rtl"] :not([tide-is-post]) #tide-side-bar,
        [dir="rtl"] :not([tide-is-post]) #tide-content {
            @apply -translate-x-96;
        }

        /* [dir="ltr"] :not([tide-is-post]) [tide-side-bar-expanded="true"] #tide-side-bar,
        [dir="rtl"] :not([tide-is-post]) [tide-side-bar-expanded="true"] #tide-side-bar {
            @apply shadow-none;
        } */

        /* 只在 1280*768 后展示斜角 */
        /* [dir="ltr"] :not([tide-is-post]) [tide-side-bar-expanded="true"] #tide-deco {
            @apply fixed left-96 h-full z-30 pointer-events-none;
        } */

        /* [dir="rtl"] :not([tide-is-post]) [tide-side-bar-expanded="true"] #tide-deco {
            @apply fixed right-96 h-full z-30 pointer-events-none;
        } */

        #tide-deco #triangle-big {
            @apply fill-prim;
        }

        :not([tide-is-post]) #tide-content {
            @apply w-[calc(100%-24rem)];
        }

        :not([tide-is-post]) #tide-btn-nav {
            @apply hidden;
        }
    }
}